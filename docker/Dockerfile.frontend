FROM node:18-alpine3.20 as angular
RUN apk add \
    --no-cache \
    --quiet \
    bash=~5 \
    curl=~8 \
    jq=~1

WORKDIR /app

COPY . .
RUN npm install
RUN npm run build:prod

FROM httpd:alpine3.15
RUN apk add \
    --no-cache \
    --quiet \
    bash=~5 \
    curl=~8 \
    jq=~1
WORKDIR /usr/local/apache2/htdocs
COPY --from=angular /app/dist/my-first-project .
